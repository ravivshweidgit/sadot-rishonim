# יצירת סרט עם קריינות - Movie Creation with Narration

## תהליך יצירת הסרט

### שלב 1: חילוץ סצנות עם טקסט קריינות
```bash
python extract_scenes.py
```
**תוצאה:** `scenes.json` עם שדה `narration_text` בכל סצנה

### שלב 2: מיזוג סצנות משני הספרים
```bash
python merge_scenes_from_books.py
```
**תוצאה:** `merged_scenes.json` עם טקסט קריינות משולב משני הספרים

### שלב 3: יצירת קריינות (TTS)
```bash
python generate_narration.py [method]
```
**Methods:**
- `gtts` - Google TTS (חינמי, לא דורש API key) - מומלץ להתחלה
- `google` - Google Cloud TTS (דורש API key, איכות טובה)
- `elevenlabs` - ElevenLabs (דורש API key, איכות מעולה)

**תוצאה:** 
- קבצי MP3 עם קריינות לכל סצנה
- `narration_index.json` עם מידע על כל קובץ

### שלב 4: יצירת וידאו מסונכרן עם קריינות
```bash
python generate_video.py
```
**תהליך:**
1. קורא כל סצנה מ-`merged_scenes.json`
2. טוען את קובץ הקריינות המתאים
3. יוצר וידאו עם:
   - רקע מתמונות ארכיון
   - דמויות עם פנים מזוהות
   - קריינות מסונכרנת
4. מחבר את כל הסצנות לסרט אחד

## מבנה הקריינות

### סצנה משולבת (משני הספרים):
```
[משדות ראשונים]
יהודה מור עלה ארצה כילד ב-1904...

[מבית מרקובסקי]
בעיצומו של חורף תרס"ד (1904) עגנה אוניה בחוף ימה של יפו...
```

### סצנה עצמאית:
```
יהודה מור עלה ארצה כילד ב-1904, השנה בה החלה העלייה השנייה...
```

## סינכרון קריינות-וידאו

כל סצנה כוללת:
- `narration_text` - הטקסט שיוקרא
- `narration_duration_estimate` - משך הקריינות המשוער (בשניות)
- `audio_file` - קובץ הקריינות שנוצר

הסרט יסונכרן כך שהוידאו יתאים למשך הקריינות:
- אם הקריינות ארוכה יותר מהוידאו - הוידאו יוארך (loops, slow motion)
- אם הקריינות קצרה יותר - הוידאו יקוצר או יוסיף transitions

## דוגמה לסצנה עם קריינות

```json
{
  "id": "merged_1904_jaffa",
  "year": 1904,
  "location": "jaffa",
  "narration_text": "[משדות ראשונים]\nיהודה מור עלה ארצה כילד ב-1904...\n\n[מבית מרקובסקי]\nבעיצומו של חורף תרס\"ד (1904) עגנה אוניה בחוף ימה של יפו...",
  "narration_duration_estimate": 45,
  "audio_file": "movie/output/narration/merged_1904_jaffa_narration.mp3",
  "visual_requirements": {
    "action": "arrival",
    "characters": ["yehuda", "yosef", "moriah"]
  }
}
```

## איכות קריינות

### gTTS (מומלץ להתחלה):
- ✅ חינמי
- ✅ לא דורש API key
- ✅ איכות סבירה לעברית
- ⚠️ קצב קריאה קבוע

### Google Cloud TTS:
- ✅ איכות טובה
- ✅ אפשרויות התאמה (קצב, גובה)
- ⚠️ דורש API key
- ⚠️ עלות לפי שימוש

### ElevenLabs:
- ✅ איכות מעולה
- ✅ קול טבעי מאוד
- ✅ תמיכה בעברית טובה
- ⚠️ דורש API key
- ⚠️ עלות גבוהה יותר

## טיפים

1. **התחלה:** השתמש ב-gTTS לבדיקות ראשוניות
2. **ייצור סופי:** עבור ל-Google Cloud TTS או ElevenLabs לאיכות טובה יותר
3. **בדיקה:** האזן לקבצי הקריינות לפני יצירת הוידאו
4. **תיקונים:** אם יש שגיאות בקריינות, תקן את `narration_text` והריץ שוב
