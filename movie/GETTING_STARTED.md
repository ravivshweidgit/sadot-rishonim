# 🎬 התחלה מהירה - פרויקט סרט AI מטולה

## מה המטרה?
ליצור סרט AI המספר את סיפור המשפחה במטולה בשנים 1900-1921, בהתבסס על שני הספרים.

---

## 🎯 הגישה: AI מתייג → AI קובע insertion points → Python ממזג

**הגישה הנבחרת:** 
1. AI מתייג טווחי שורות בתוך עמודים (שנה, חודש, מיקום)
2. AI מחלק את הספר של רוחמה לפסקאות וקובע insertion points (לכל פסקה, איפה להיכנס בספר של יהודה)
3. Python ממזג לפי insertion points (שומר על הסדר המקורי של הספר של יהודה)

**למה?**
- ✅ הספר של יהודה נשאר בסדר המקורי שלו (מסגרת הנרטיב נשמרת)
- ✅ AI מבין את ההקשר הכרונולוגי והנרטיבי בין שני הספרים
- ✅ פסקאות מהספר של רוחמה נכנסות בנקודות המתאימות לפי הקשר, לא רק לפי זמן
- ✅ שמירה על רצף פסקתי בספר של רוחמה
- ✅ זיהוי מדויק מאוד (AI מבין הקשר)
- ✅ התסריט = הטקסט מהספרים עצמם
- ✅ Python עובד עם מבנה שהוא מבין (עמודים ושורות ממוספרות)
- ✅ שמירה על הקשר מדויק - כל קטע יודע מאיזה עמוד ואילו שורות

---

## 🚀 הצעדים הראשונים (4 שלבים פשוטים)

### שלב 1: Python יוצר תבנית לתיוג ⏱️ 2 דקות

**מה זה עושה:** קורא את כל העמודים משני הספרים ויוצר קובץ JSON מוכן לתיוג.

```bash
cd movie/scripts
python 01_tag_pages_with_ai.py
```

**תוצאה:** `movie/output/scripts/pages_for_ai_tagging.json` - קובץ עם כל העמודים

**מה הסקריפט עושה:**
- קורא את כל העמודים משני הספרים (~276 עמודים)
- יוצר מבנה JSON עם כל העמודים
- כל עמוד כולל: טקסט מלא, שורות ממוספרות, פרק, עמוד
- מוכן לתיוג טווחי שורות על ידי AI

**מתי לעשות:** פעם אחת, בהתחלה

---

### שלב 2: AI מתייג כל עמוד ⏱️ תלוי בשיטה

**מה זה עושה:** AI מתייג טווחי שורות בתוך כל עמוד עם שנה, חודש, מיקום, דמויות.

**יש לך שתי אפשרויות:**

#### אפשרות A: תיוג אוטומטי עם Gemini API ⭐ (מומלץ!)

**מה זה עושה:** משתמש ב-Gemini API הקיים בפרויקט לתיוג אוטומטי.

```bash
python 02_tag_pages_with_gemini.py
```

**יתרונות:**
- ✅ אוטומטי - לא צריך לשלוח ידנית
- ✅ משתמש ב-API key הקיים
- ✅ מהיר יותר

**תוצאה:** `pages_tagged_by_ai.json` - קובץ JSON עם כל העמודים מתויגים

**מתי לעשות:** אחרי שלב 1

---

#### אפשרות B: תיוג ידני עם ChatGPT/Claude

**מה זה עושה:** אתה שולח ידנית ל-ChatGPT/Claude.

**איך לעשות:**
1. פתח את `movie/output/scripts/pages_for_ai_tagging.json`
2. שלח ל-ChatGPT/Claude עם ההוראות המפורטות

**👉 קרא את ההוראות המפורטות:** [AI_TAGGING_INSTRUCTIONS.md](AI_TAGGING_INSTRUCTIONS.md)

**בקצרה:**
- AI יתייג טווחי שורות בתוך כל עמוד עם: `line_start`, `line_end`, `year`, `month`, `location`, `locations`, `characters`, `confidence`
- כל טווח שורות מתוייג בנפרד לפי התוכן שלו
- AI משתמש בהבנת הקשר כדי לזהות תאריכים ומיקומים גם אם הם לא מפורשים
- שמור את התוצאה כ-`pages_tagged_by_ai.json`

**תוצאה:** קובץ JSON עם כל העמודים מתויגים

**מתי לעשות:** אם אתה מעדיף לשלוט בתהליך או אם Gemini API לא עובד

---

### שלב 3: AI קובע insertion points (חלוקה לפסקאות) ⏱️ תלוי ב-AI

**מה זה עושה:** AI מחלק את הספר של רוחמה לפסקאות בעלות הקשר וקובע לכל פסקה איפה היא צריכה להיכנס בספר של יהודה.

```bash
python 02b_determine_insertion_points.py
```

**מה הסקריפט עושה:**
- AI קורא את הספר של יהודה במלואו כדי להבין את ההקשר הכרונולוגי והנרטיבי
- **לכל עמוד מהספר של רוחמה:**
  - AI מחלק את העמוד לפסקאות בעלות הקשר (contextually coherent paragraphs)
  - כל פסקה יכולה להיות שורה אחת, כמה שורות, או חלק מעמוד
  - לכל פסקה, AI קובע:
    - `source_line_start`, `source_line_end`: טווח השורות של הפסקה בספר של רוחמה
    - `insert_after_page`: מספר עמוד בספר של יהודה אחרי איזה להכניס
    - `insert_after_line`: מספר שורה בספר של יהודה אחרי איזה להכניס (0 = אחרי כל העמוד)
    - `insert_reason`: סיבה קצרה למה כאן (לפי הקשר כרונולוגי/נרטיבי)
    - `confidence`: רמת ביטחון (high/medium/low)

**למה פסקאות ולא עמודים שלמים?**
- ✅ פסקאות שומרות על הקשר מדויק יותר
- ✅ כל פסקה יכולה להיכנס בנקודה המתאימה לה בספר של יהודה
- ✅ שמירה על רצף פסקתי בספר של רוחמה
- ✅ שילוב חלק יותר בספר של יהודה

**תוצאה:** `movie/output/scripts/insertion_points.json` - קובץ JSON עם כל ה-insertion points ברמת פסקאות

**מתי לעשות:** אחרי שלב 2

---

### שלב 4: Python ממזג לפי insertion points ⏱️ 1 דקה

**מה זה עושה:** Python קורא את ה-insertion points וממזג את הספרים תוך שמירה על הסדר המקורי של הספר של יהודה.

```bash
python 03_merge_books_with_ai_tags.py
```

**תוצאה:** `movie/output/scripts/merged_books_with_ai_tags.txt` - הטקסט הממוזג

**מה הסקריפט עושה:**
- קורא את התיוגים מ-AI (`pages_tagged_by_ai.json`)
- קורא את ה-insertion points (`insertion_points.json`) - ברמת פסקאות
- שומר על הסדר המקורי של הספר של יהודה (שדות ראשונים)
- מכניס פסקאות מהספר של רוחמה בנקודות שקבע AI (לפי `insert_after_page` ו-`insert_after_line`)
- יוצר טקסט ממוזג עם ציון מקור לכל חלק (עמוד + שורות)

**מתי לעשות:** אחרי שלב 3

---

## 📁 איפה מה?

```
movie/
├── scripts/              # סקריפטים בפייתון
│   ├── 01_tag_pages_with_ai.py              ← שלב 1: הרץ את זה
│   ├── 02_tag_pages_with_gemini.py          ← שלב 2: הרץ את זה
│   ├── 02b_determine_insertion_points.py    ← שלב 3: הרץ את זה
│   └── 03_merge_books_with_ai_tags.py       ← שלב 4: הרץ את זה
│
├── output/scripts/      # התוצרים של הסקריפטים
│   ├── pages_for_ai_tagging.json    ← תוצאה של שלב 1
│   ├── pages_tagged_by_ai.json      ← תוצאה של שלב 2
│   ├── insertion_points.json        ← תוצאה של שלב 3 (AI קובע insertion points)
│   └── merged_books_with_ai_tags.txt ← תוצאה של שלב 4 (התסריט!)
│
├── data/                # תמונות (תוסיף מאוחר יותר)
│   ├── faces/           # תמונות פנים של הדמויות
│   └── locations/       # תמונות ארכיון מקומות
│
└── docs/                # תיעוד (קרא לפי הצורך)
    └── MOVIE_ARCHITECTURE.md
```

---

## 💡 טיפים חשובים

### 1. **התחל פשוט**
   - הרץ את הסקריפטים שלב אחר שלב
   - בדוק את התוצאות לפני שאתה ממשיך

### 2. **AI מתייג ומחלק, לא יוצר**
   - AI מתייג את העמודים (שנה, חודש, מיקום)
   - AI מחלק את הספר של רוחמה לפסקאות וקובע insertion points
   - התסריט נשאר הטקסט מהספרים עצמם
   - אין יצירה חדשה

### 3. **עבוד איטי ובטוח**
   - כל שלב בונה על הקודם
   - אין צורך למהר

### 4. **שאל שאלות**
   - אם משהו לא ברור, תשאל
   - עדיף לשאול מאשר לטעות

---

## ❓ שאלות נפוצות

### Q: האם אני צריך להריץ את כל הסקריפטים?
**A:** כן! שלבים 1-3 הם הבסיס. שלבים נוספים (יצירת וידאו) יבואו מאוחר יותר.

### Q: האם אני צריך לדעת פייתון?
**A:** לא! רק להריץ את הסקריפטים. הקוד כבר כתוב.

### Q: כמה זמן לוקח לתייג עם AI?
**A:** תלוי במודל, אבל בדרך כלל 30-60 דקות לכל העמודים.

### Q: מה אם AI לא מזהה תאריך?
**A:** זה בסדר! תן `null` או `unknown`. Python ימזג גם עמודים ללא תאריך.

### Q: מה אם משהו לא עובד?
**A:** בדוק את הודעות השגיאה, או שאל. רוב הבעיות הן קטנות וקלות לתיקון.

---

## 🎯 מה הלאה?

1. ✅ הרץ את שלב 1 (Python יוצר תבנית)
2. ✅ הרץ את שלב 2 (AI מתייג)
3. ✅ הרץ את שלב 3 (Python ממזג)
4. ✅ בדוק את התוצאה ב-`merged_books_with_ai_tags.txt`
5. ✅ זה התסריט שלך! השתמש בו ליצירת קריינות ווידאו

---

## 📞 עזרה

אם אתה מבולבל:
1. קרא את **AI_TAGGING_INSTRUCTIONS.md** להוראות מפורטות
2. קרא את **WORKFLOW.md** לפרטים נוספים
3. שאל שאלות ספציפיות

**זכור:** זה פרויקט גדול, אבל אתה יכול לעבוד עליו שלב אחר שלב. אין צורך להבין הכל בבת אחת! 🎬
